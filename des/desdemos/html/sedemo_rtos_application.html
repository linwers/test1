
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      --><title>Operating System with Prioritized Task Execution</title><meta name="generator" content="MATLAB 7.10"><meta name="date" content="2010-01-05"><meta name="m-file" content="sedemo_rtos_application"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sedemo_rtos_application.mdl</div><div class="right"><a href="matlab:sedemo_rtos_application">Open this model</a></div></div><div class="content"><h1>Operating System with Prioritized Task Execution</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Overview</a></li><li><a href="#2">Structure of the Model</a></li><li><a href="#3">Task Token Generators</a></li><li><a href="#6">Task Delay Subsystem</a></li><li><a href="#8">Task Dispatcher Subsystem</a></li><li><a href="#10">Results and Displays</a></li><li><a href="#11">Experimenting with the Model</a></li><li><a href="#12">Related Demos</a></li></ul></div><h2>Overview<a name="1"></a></h2><p>This model demonstrates the scheduling and execution of tasks in a multitasking operating system. It not only illustrates the aspect of task preemption but also shows how to simulate the prioritization of the time-critical and non-time-critical parts of a process using dependent tasks.</p><img vspace="5" hspace="5" src="sedemo_rtos_application_01.png" alt=""> <h2>Structure of the Model<a name="2"></a></h2><p>Task tokens are generated by the subsystems in the Task Token Generators section of the model. These tokens spend time in the Task Delay subsystem and then advance to the Task Dispatcher subsystem. The Task Dispatcher subsystem generates function calls that invoke task subsystems in the Tasks section of the model and generate dependent tasks.</p><h2>Task Token Generators<a name="3"></a></h2><p>Each kind of task has a token generator subsystem in the Task Token Generators section of the model. The presence of the Start input port indicates that one kind of task depends on the completion of another kind of task.</p><p>Each token carries data in these attributes:</p><div><ul><li><tt>PriorityAttributeName</tt> -  Task priority, with smaller numbers representing higher priorities</li></ul></div><div><ul><li><tt>TaskExecTime</tt> - Time to execute the task, excluding delays due to other tasks</li></ul></div><div><ul><li><tt>TaskID</tt>  - Task identifier, which assumes a value from 0 to 4.</li></ul></div><p>Each value of TaskID represents a particular type of task.</p><div><ul><li>0 = Idle task (generated in Task Delay subsystem)</li></ul></div><div><ul><li>1 = Interrupt-priority task</li></ul></div><div><ul><li>2 = Application-priority task that depends on completion of Task 1</li></ul></div><div><ul><li>3 = Application-priority task</li></ul></div><div><ul><li>4 = Application-priority task that depends on completion of Task 3</li></ul></div><h2>Task Delay Subsystem<a name="6"></a></h2><p>Tokens wait in a queue in ascending priority and then advance to the server block labeled CPU Task Delay. A higher priority task can preempt a lower priority task. Upon preemption, the lower priority task records its residual execution time and returns to the queue.</p><img vspace="5" hspace="5" src="sedemo_rtos_application_02.png" alt=""> <p>At T=0, the OS Token Generator subsystem generates the idle task. The idle task has infinite duration and lowest priority. When the idle task is being served, it indicates that there is no task currently executing.</p><h2>Task Dispatcher Subsystem<a name="8"></a></h2><img vspace="5" hspace="5" src="sedemo_rtos_application_03.png" alt=""> <p>Using <tt>TaskId</tt>, the Task Dispatcher routes each task to the appropriate Entity Departure Event to Function-Call Event block. The block generates one or two function calls that</p><div><ul><li>Execute the appropriate function-call subsystem representing the action performed in that task. In this model, the actions are arithmetic operations on a signal A, but in your own models the actions can be more complex.</li></ul></div><div><ul><li>Model dependent tasks, if applicable. For example, execution of Task 2 depends on completion of Task 1. Notice that the function call at the <tt>Next task 1</tt> output port connects to the <tt>Start</tt> input port of the Application-Priority Token Generator Task ID 2 block.</li></ul></div><h2>Results and Displays<a name="10"></a></h2><p>The model include scopes that show these simulation statistics:</p><div><ul><li>Priority of the current task as shown in plot Priority Value for Tasks.</li></ul></div><div><ul><li>Task ID of the current task as shown in plot Present Task ID.</li></ul></div><div><ul><li>Average length of the task queue as shown in plot Task Queue Length.</li></ul></div><div><ul><li>Value of A as the tasks manipulate it as shown in plot Value of 'A'</li></ul></div><img vspace="5" hspace="5" src="sedemo_rtos_application_04.png" alt=""> <img vspace="5" hspace="5" src="sedemo_rtos_application_05.png" alt=""> <img vspace="5" hspace="5" src="sedemo_rtos_application_06.png" alt=""> <img vspace="5" hspace="5" src="sedemo_rtos_application_07.png" alt=""> <h2>Experimenting with the Model<a name="11"></a></h2><p>You can introduce randomness by making one or more of these changes:</p><div><ul><li>Make the task execution time random by changing parameters of the Event-Based RNG Task Time blocks in the task token generator subsystems.</li></ul></div><div><ul><li>Make the arrival of interrupt or application tasks random by changing the <b>Distribution</b> parameter in the Time-Based Entity Generator block in the task token generator subsystem for Task 1 or Task 3, respectively.</li></ul></div><h2>Related Demos<a name="12"></a></h2><div><ul><li><a href="matlab:showdemo('sedemo_rtos_two_priorities');">Task Sharing with Two Levels of Priority and Preemption</a></li><li><a href="matlab:showdemo('sedemo_rtos_dependent_tasks');">Multitasking with Dependent Tasks</a></li></ul></div><p class="footer">Copyright 2005-2008 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.10</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Operating System with Prioritized Task Execution
%Copyright 2005-2008 The MathWorks, Inc.
%% Overview
% This model demonstrates the scheduling and execution of tasks in a
% multitasking operating system. It not only illustrates the aspect of task
% preemption but also shows how to simulate the prioritization of the time-critical and non-time-critical parts of a process using dependent tasks.
model_name = 'sedemo_rtos_application';
open_system(model_name);
%% Structure of the Model
% Task tokens are generated by the subsystems in the Task Token Generators section of the model. These tokens spend time in the Task Delay subsystem and then advance to the Task
% Dispatcher subsystem. The Task Dispatcher subsystem generates function
% calls that invoke task subsystems in the Tasks section of the model and
% generate dependent tasks.
%
%% Task Token Generators
% Each kind of task has a token generator subsystem in the Task Token Generators section of the model. The presence of the Start input port indicates that one
% kind of task depends on the completion of another kind of task.
% 
% Each token carries data in these attributes:
%  
% * |PriorityAttributeName| -  Task priority, with smaller numbers representing higher priorities
% 
% * |TaskExecTime| - Time to execute the task, excluding delays due to other tasks
% 
% * |TaskID|  - Task identifier, which assumes a value from 0 to 4. 
%%
% Each value of TaskID represents a particular type of task.
%%
% * 0 = Idle task (generated in Task Delay subsystem)
%
% * 1 = Interrupt-priority task
%
% * 2 = Application-priority task that depends on completion of Task 1
%
% * 3 = Application-priority task
%
% * 4 = Application-priority task that depends on completion of Task 3
 
%% Task Delay Subsystem
% Tokens wait in a queue in ascending priority and then advance to the server block labeled CPU Task Delay. A higher priority task can preempt a lower priority
% task. Upon preemption, the lower priority task records its residual execution time and returns to the queue.
% 
open_system([model_name,'/Task Delay']);
%%
% At T=0, the OS Token Generator subsystem generates the idle task. The idle task has infinite duration and lowest priority. When the idle task is being served,
% it indicates that there is no task currently executing.
%% Task Dispatcher Subsystem 
open_system([model_name,'/Task Dispatcher']);
%%
% Using |TaskId|, the Task Dispatcher routes each task to the appropriate
% Entity Departure Event to Function-Call Event block. The block generates
% one or two function calls that
%
% * Execute the appropriate function-call subsystem representing the action
% performed in that task. In this model, the actions are arithmetic
% operations on a signal A, but in your own models the actions can be more
% complex.
%
% * Model dependent tasks, if applicable. For example, execution of Task 2
% depends on completion of Task 1. Notice that the function call at the
% |Next task 1| output port connects to the |Start| input port of the
% Application-Priority Token Generator Task ID 2 block.

%% Results and Displays
% The model include scopes that show these simulation statistics:
% 
% * Priority of the current task as shown in plot Priority Value for
% Tasks.
% 
% * Task ID of the current task as shown in plot Present Task ID.
% 
% * Average length of the task queue as shown in plot Task Queue Length.
% 
% * Value of A as the tasks manipulate it as shown in plot Value of 'A'
% 
sim(model_name);
%% Experimenting with the Model
% You can introduce randomness by making one or more of these changes:
% 
% * Make the task execution time random by changing parameters of the Event-Based RNG Task Time blocks in the task token generator subsystems.
% 
% * Make the arrival of interrupt or application tasks random by changing the *Distribution* parameter in the Time-Based Entity Generator block in the task token generator subsystem for Task 1 or Task 3, respectively.
% 
% 
%% Related Demos
% * <matlab:showdemo('sedemo_rtos_two_priorities'); Task Sharing with Two Levels of Priority and Preemption>
% * <matlab:showdemo('sedemo_rtos_dependent_tasks'); Multitasking with Dependent Tasks>
% 
%%
clear (model_name);
bdclose all;


displayEndOfDemoMessage(mfilename)

##### SOURCE END #####
--></body></html>