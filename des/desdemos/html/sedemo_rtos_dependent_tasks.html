
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      --><title>Multitasking with Dependent Tasks</title><meta name="generator" content="MATLAB 7.10"><meta name="date" content="2010-01-05"><meta name="m-file" content="sedemo_rtos_dependent_tasks"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sedemo_rtos_dependent_tasks.mdl</div><div class="right"><a href="matlab:sedemo_rtos_dependent_tasks">Open this model</a></div></div><div class="content"><h1>Multitasking with Dependent Tasks</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Description</a></li><li><a href="#2">Results and Displays</a></li><li><a href="#7">Related Demos</a></li></ul></div><h2>Description<a name="1"></a></h2><p>This model demonstrates how to model and prioritize the time-critical and non-time-critical parts of a process using dependent tasks.</p><p>Task tokens with two priority levels are generated by the two token generators on the left side of the model. The tokens are ordered in ascending priority in the Priority-Based Task Queue just before the CPU. The tokens are then passed to the CPU for task execution.</p><p>A task dependent on the completion of the high-priority task is modeled using the combination of the Entity Departure Event to Function-Call Event block and the Event-Based Entity Generator block. This allows the time-critical part of a process to be performed by a high-priority task. The remaining non-time-critical part is performed by a low-priority task, which is scheduled as a dependent task. The dependent task tokens are processed through the same task queue as the independent tasks.</p><img vspace="5" hspace="5" src="sedemo_rtos_dependent_tasks_01.png" alt=""> <h2>Results and Displays<a name="2"></a></h2><p>The simulation results can be seen on the following scopes:</p><div><ul><li> Priority value of the task being executed in the CPU. This plot    indicates when a high-priority task (priority 1) preempts a    low-priority task (priority 2) and when a low-priority task preempts a    dependent task (priority 3).</li></ul></div><img vspace="5" hspace="5" src="sedemo_rtos_dependent_tasks_02.png" alt=""> <div><ul><li> Length of the Priority-Based Task Queue. The queue length increases at    times when the high-priority task is completed because the completion    causes generation of a new dependent task.</li></ul></div><img vspace="5" hspace="5" src="sedemo_rtos_dependent_tasks_03.png" alt=""> <div><ul><li> Number of low-priority tasks completed.</li></ul></div><img vspace="5" hspace="5" src="sedemo_rtos_dependent_tasks_04.png" alt=""> <div><ul><li> Number of high-priority tasks completed.</li></ul></div><img vspace="5" hspace="5" src="sedemo_rtos_dependent_tasks_05.png" alt=""> <div><ul><li> Number of dependent tasks completed. This equals the number of    high-priority tasks completed because the dependent task tokens are    generated upon the completion of a high-priority task.</li></ul></div><img vspace="5" hspace="5" src="sedemo_rtos_dependent_tasks_06.png" alt=""> <h2>Related Demos<a name="7"></a></h2><div><ul><li><a href="matlab:showdemo('sedemo_rtos_application');">Operating System with Prioritized Task Execution</a></li><li><a href="matlab:showdemo('sedemo_rtos_two_priorities');">Task Sharing with Two Levels of Priority and Preemption</a></li></ul></div><p class="footer">Copyright 2008 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.10</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Multitasking with Dependent Tasks

% Copyright 2008 The MathWorks, Inc.
% $Revision: 1.1.6.1 $ $Date: 2009/08/11 15:39:24 $

%% Description
% This model demonstrates how to model and prioritize the time-critical and
% non-time-critical parts of a process using dependent tasks.
%
% Task tokens with two priority levels are generated by the two token
% generators on the left side of the model. The tokens are ordered in
% ascending priority in the Priority-Based Task Queue just before the CPU.
% The tokens are then passed to the CPU for task execution.
%
% A task dependent on the completion of the high-priority task is modeled
% using the combination of the Entity Departure Event to Function-Call
% Event block and the Event-Based Entity Generator block. This allows the
% time-critical part of a process to be performed by a high-priority task.
% The remaining non-time-critical part is performed by a low-priority task,
% which is scheduled as a dependent task. The dependent task tokens are
% processed through the same task queue as the independent tasks.

modelname = 'sedemo_rtos_dependent_tasks';
open_system(modelname);
set_param([modelname '/Task Queue Length'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Plots and  function-call for  dependent tasks/Signal Scope'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Plots and  function-call for  dependent tasks/Low Priority Token Count'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Plots and  function-call for  dependent tasks/Dependent Token Count'],'OpenScopeAtSimStart', 'off' );

%% Results and Displays
% The simulation results can be seen on the following scopes:
%
% *  Priority value of the task being executed in the CPU. This plot
%    indicates when a high-priority task (priority 1) preempts a
%    low-priority task (priority 2) and when a low-priority task preempts a
%    dependent task (priority 3).

sim(modelname);

%%
%
% *  Length of the Priority-Based Task Queue. The queue length increases at
%    times when the high-priority task is completed because the completion
%    causes generation of a new dependent task.
%

des_scope_support('desScopeCloseFig',[modelname '/Priority Scope']);
set_param([modelname '/Priority Scope'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Task Queue Length'],'OpenScopeAtSimStart', 'on' );
sim(modelname);

%%
%
% *  Number of low-priority tasks completed.
%
des_scope_support('desScopeCloseFig',[modelname '/Task Queue Length']);
set_param([modelname '/Task Queue Length'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Plots and  function-call for  dependent tasks/Low Priority Token Count'],'OpenScopeAtSimStart', 'on' );
sim(modelname);

%%
% *  Number of high-priority tasks completed.
%
des_scope_support('desScopeCloseFig',[modelname '/Plots and  function-call for  dependent tasks/Low Priority Token Count']);
set_param([modelname '/Plots and  function-call for  dependent tasks/Low Priority Token Count'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Plots and  function-call for  dependent tasks/Signal Scope'],'OpenScopeAtSimStart', 'on' );
sim(modelname);

%%
% *  Number of dependent tasks completed. This equals the number of
%    high-priority tasks completed because the dependent task tokens are
%    generated upon the completion of a high-priority task.
des_scope_support('desScopeCloseFig',[modelname '/Plots and  function-call for  dependent tasks/Signal Scope']);
set_param([modelname '/Plots and  function-call for  dependent tasks/Signal Scope'],'OpenScopeAtSimStart', 'off' );
set_param([modelname '/Plots and  function-call for  dependent tasks/Dependent Token Count'],'OpenScopeAtSimStart', 'on' );

sim(modelname);

%% Related Demos
% * <matlab:showdemo('sedemo_rtos_application'); Operating System with Prioritized Task Execution>
% * <matlab:showdemo('sedemo_rtos_two_priorities'); Task Sharing with Two Levels of Priority and Preemption>


%% 
%cleanup
bdclose(modelname);
clear modelname;
displayEndOfDemoMessage(mfilename)

##### SOURCE END #####
--></body></html>