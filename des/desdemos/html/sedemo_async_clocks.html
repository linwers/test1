
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML is auto-generated from an M-file.
To make changes, update the M-file and republish this document.
      --><title>Asynchronous Clock Domains</title><meta name="generator" content="MATLAB 7.10"><meta name="date" content="2010-01-05"><meta name="m-file" content="sedemo_async_clocks"><link rel="stylesheet" type="text/css" href="../../../matlab/demos/private/style.css"></head><body><div class="header"><div class="left">sedemo_async_clocks.mdl</div><div class="right"><a href="matlab:sedemo_async_clocks">Open this model</a></div></div><div class="content"><h1>Asynchronous Clock Domains</h1><!--introduction--><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#1">Overview</a></li><li><a href="#2">Structure of the Model</a></li><li><a href="#4">Synchronous Clock Domains</a></li><li><a href="#6">Independently Drifting Clock Domains</a></li><li><a href="#9">Identically Drifting Clock Domains</a></li></ul></div><h2>Overview<a name="1"></a></h2><p>This demo shows how to model synchronous and asynchronous clock domain behavior.  A clock domain is a region of a model with timing that is derived from a single clock.</p><h2>Structure of the Model<a name="2"></a></h2><p>The demo illustrates the implementation of two clock domains via function-call subsystems.  The function-call subsystem for domain 1 labeled Domain 1 (Task: +1) increments the value of Data Store Memory <tt>A</tt> while the function-call subsystem for domain 2 labeled Domain 2 (Task: -1) decrements the value of <tt>A</tt>.  The domains are driven by separate clocks labeled Clock 1 and Clock 2.  These blocks are, in turn, driven by sine wave generators labeled Interval for Clock 1 and Interval for Clock 2. By varying the parameters of the sine wave generators, the demo illustrates three types of interaction between two clock domains.</p><img vspace="5" hspace="5" src="sedemo_async_clocks_01.png" alt=""> <p>The subsystems labeled Clock 1 and Clock 2 each contain a block labeled Signal-Based Event to Function-Call Event.  Each subsystem allows for the function calls generated by each Signal-Based Event to Function-Call Event block to execute itself with a time delay from the t port. The variable-delay allows both clock subsystems to generate function calls with an interval controlled by the subsystem's t port.  For more information, see the 'Calling a  Subsystem at Arbitrary Times' section in <a href="sedemo_timrecresample.html">Bit Timing Recovery Using Fixed-Rate Resampling</a>.</p><img vspace="5" hspace="5" src="sedemo_async_clocks_02.png" alt=""> <h2>Synchronous Clock Domains<a name="4"></a></h2><p>Synchronous Clock Domains are modeled when the function-call subsystems execute synchronously at regular intervals.  The Interval for Clock 1 and Interval for Clock 2 blocks have their <b>Bias</b> parameters set to 0.01 to create the 0.01 clock interval.  In addition, the <b>Amplitude</b> parameter is set to 0 for both blocks to avoid introducing frequency drift.</p><img vspace="5" hspace="5" src="sedemo_async_clocks_03.png" alt=""> <p>The plot shows that the value of <tt>A</tt> oscillates between 0 and 1 at intervals of 0.01 indicating that the clock domains are executing synchronously at regular intervals.</p><h2>Independently Drifting Clock Domains<a name="6"></a></h2><p>Asynchronous clock domains are modeled when the function-call subsystems execute at intervals that are not necessarily periodic or synchronized. The <b>Bias</b> parameter for the blocks labeled Interval for Clock 1 and Interval for Clock 2 are set the same as above, 0.01, but the <b>Amplitude</b> parameter is set to -0.0001 and 0.0001 respectively.  This causes a 1% (0.0001 / 0.01) drift in  each clock but with opposite phase.</p><img vspace="5" hspace="5" src="sedemo_async_clocks_04.png" alt=""> <p>The plot shows that the value of <tt>A</tt> initially oscillates between 0 and 1 but the times at which <tt>A</tt> is being decremented begin to lag behind the times at which <tt>A</tt> is incremented. At time .525, the decrement times lag the update times by one update interval and the value of <tt>A</tt> begins to oscillate between 1 and 2 instead of 0 and 1.  The values for <tt>A</tt> are drifting upward as a result of the drifting clock domains.</p><img vspace="5" hspace="5" src="sedemo_async_clocks_05.png" alt=""> <p>Autoscaling the scope shows the values of <tt>A</tt> for a 10 second period. The plot shows that the value of <tt>A</tt> initially oscillates between 0 and 1 but then the values of the oscillation drift up to 2 and 3 and later down to -1 and -2 and back again.  This occurs because the clocks are drifting in a sinusoidal pattern.</p><h2>Identically Drifting Clock Domains<a name="9"></a></h2><p>Identically drifting clock domains can be modeled by executing the function-call subsystems at intervals that are not constant but are identical to eachother.  The <b>Bias</b> parameter for the blocks labeled Interval for Clock 1 and Interval for Clock 2 are set the same as above, 0.01, but the <b>Amplitude</b> parameter is set to 0.0001 to cause a 1% drift in each clock but with the same phase.</p><img vspace="5" hspace="5" src="sedemo_async_clocks_06.png" alt=""> <p>The plot shows that the value of <tt>A</tt> oscillates between 0 and 1 indicating that the clock domains are fully synchronized.  The plot also shows that the period of oscillation of <tt>A</tt> is 0.01 at the start of the simulation but increases slightly as the simulation progresses.</p><p class="footer">Copyright 2005-2008 The MathWorks, Inc.<br>
          Published with MATLAB&reg; 7.10</p><p class="footer" id="trademarks">MATLAB and Simulink are registered trademarks of The MathWorks, Inc.  Please see <a href="http://www.mathworks.com/trademarks">www.mathworks.com/trademarks</a> for a list of other trademarks owned by The MathWorks, Inc.  Other product or brand names are trademarks or registered trademarks of their respective owners.</p></div><!--
##### SOURCE BEGIN #####
%% Asynchronous Clock Domains

% Copyright 2005-2008 The MathWorks, Inc.
% $Revision: 1.1.6.3 $ $Date: 2009/11/13 04:15:27 $

%% Overview
% This demo shows how to model synchronous and asynchronous clock
% domain behavior.  A clock domain is a region of a model with timing 
% that is derived from a single clock. 

%% Structure of the Model
% The demo illustrates the implementation of two clock domains via 
% function-call subsystems.  The function-call subsystem for domain 1
% labeled Domain 1 (Task: +1) increments the value of Data Store Memory
% |A| while the function-call subsystem for domain 2 labeled Domain 2 
% (Task: -1) decrements the value of |A|.  The domains are driven 
% by separate clocks labeled Clock 1 and Clock 2.  These blocks are, 
% in turn, driven by sine wave generators labeled Interval for Clock 1
% and Interval for Clock 2. By varying the parameters of the sine wave 
% generators, the demo illustrates three types of interaction between two
% clock domains. 

modelname = 'sedemo_async_clocks';
open_system(modelname);

%%
% The subsystems labeled Clock 1 and Clock 2 each contain a block labeled 
% Signal-Based Event to Function-Call Event.  Each subsystem allows for the 
% function calls generated by each Signal-Based Event to Function-Call Event 
% block to execute itself with a time delay from the t port. The 
% variable-delay allows both clock subsystems to generate function calls 
% with an interval controlled by the subsystem's t port.  For more
% information, see the 'Calling a  Subsystem at Arbitrary Times' section in
% <sedemo_timrecresample.html Bit Timing Recovery Using
% Fixed-Rate Resampling>.

open_system([modelname '/Clock 1']);


%% Synchronous Clock Domains
% Synchronous Clock Domains are modeled when the function-call subsystems
% execute synchronously at regular intervals.  The Interval for Clock 1 
% and Interval for Clock 2 blocks have their *Bias* parameters set to
% 0.01 to create the 0.01 clock interval.  In addition, the *Amplitude*
% parameter is set to 0 for both blocks to avoid introducing frequency
% drift.  

set_param([modelname '/Interval For Clock 1'], 'Amplitude', '0');
set_param([modelname '/Interval For Clock 2'], 'Amplitude', '0');
set_param([modelname '/Value of ''A'''], 'Title', ...
	'Value of ''A'' with Synchronous Clock Domains');
set_param([modelname '/Value of ''A'''], 'XMin', '0', 'XMax','0.6');
set_param([modelname '/Value of ''A'''], 'XLimitExceededOption', 'Keep axis limits unchanged');
sim(modelname);

%%  
% The plot shows that the value of |A| oscillates between 0 and 1 at 
% intervals of 0.01 indicating that the clock domains are executing 
% synchronously at regular intervals.  


%% Independently Drifting Clock Domains
% Asynchronous clock domains are modeled when the function-call subsystems 
% execute at intervals that are not necessarily periodic or synchronized. 
% The *Bias* parameter for the blocks labeled Interval for Clock 1 and Interval  
% for Clock 2 are set the same as above, 0.01, but the *Amplitude* parameter 
% is set to -0.0001 and 0.0001 respectively.  This causes a 1% (0.0001 / 0.01) 
% drift in  each clock but with opposite phase. 

set_param([modelname '/Interval For Clock 1'], 'Amplitude', '-0.0001');
set_param([modelname '/Interval For Clock 2'], 'Amplitude', '0.0001');
set_param([modelname '/Value of ''A'''], 'Title', ...
	'Value of ''A'' with Independently Drifting Clock Domains');
sim(modelname);

%% 
% The plot shows that the value of |A| initially oscillates between 0 and 1  
% but the times at which |A| is being decremented begin to lag behind the 
% times at which |A| is incremented. At time .525, the decrement times lag
% the update times by one update interval and the value of |A| begins to
% oscillate between 1 and 2 instead of 0 and 1.  The values for |A| are
% drifting upward as a result of the drifting clock domains. 

sedemo_helper([modelname '/Value of ''A'''],'CloseFig');
sedemo_helper([modelname '/Value of ''A'''],'OpenFig');
sedemo_helper([modelname '/Value of ''A'''],'AutoscaleFig');

%% 
% Autoscaling the scope shows the values of |A| for a 10 second period.
% The plot shows that the value of |A| initially oscillates between 0 and 1  
% but then the values of the oscillation drift up to 2 and 3 and later down  
% to -1 and -2 and back again.  This occurs because the clocks are drifting 
% in a sinusoidal pattern. 


%% Identically Drifting Clock Domains
% Identically drifting clock domains can be modeled by executing the 
% function-call subsystems at intervals that are not constant but are
% identical to eachother.  The *Bias* parameter for the blocks labeled 
% Interval for Clock 1 and Interval for Clock 2 are set the same as 
% above, 0.01, but the *Amplitude* parameter is set to 0.0001 to cause a 
% 1% drift in each clock but with the same phase.

set_param([modelname '/Interval For Clock 1'], 'Amplitude', '0.0001');
set_param([modelname '/Interval For Clock 2'], 'Amplitude', '0.0001');
set_param([modelname '/Value of ''A'''], 'Title', ...
	'Value of ''A'' with Identically Drifting Clock Domains');
sim(modelname);

%% 
% The plot shows that the value of |A| oscillates between 0 and 1 indicating
% that the clock domains are fully synchronized.  The plot also shows that
% the period of oscillation of |A| is 0.01 at the start of the simulation
% but increases slightly as the simulation progresses.


%% 
%cleanup
bdclose(modelname);
clear modelname;
displayEndOfDemoMessage(mfilename)

##### SOURCE END #####
--></body></html>